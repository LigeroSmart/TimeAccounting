# --
# AgentTimeAccountingEdit.dtl - provides HTML form for time accounting edit
# Copyright (C) 2001-2010 OTRS AG, http://otrs.org/
# --
# $Id: AgentTimeAccountingEdit.dtl,v 1.31 2010-12-29 14:19:10 mn Exp $
# --
# This software comes with ABSOLUTELY NO WARRANTY. For details, see
# the enclosed file COPYING for license information (AGPL). If you
# did not receive this file, see http://www.gnu.org/licenses/agpl.txt.
# --

<div class="MainBox ARIARoleMain LayoutFixedSidebar SidebarFirst">
    <h1 class="Header">$Text{"Edit Time Record"}</h1>

    <div class="SidebarColumn">
<!-- dtl:block:OverviewProject -->
        <div class="WidgetSimple">
            <div class="Header">
                <h2>$Text{"Actions"}</h2>
            </div>
            <div class="Content">
                <ul class="ActionList">
                    <li>
                        <a href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=Overview;Year=$LQData{"Year"};Month=$LQData{"Month"}" class="CallForAction"><span>$Text{"Go to overview"}</span></a>
                    </li>
<!-- dtl:block:CreateProject -->
                    <li>
                        <a href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=ProjectSetting" class="CallForAction"><span>$Text{"Project settings"}</span></a>
                    </li>
<!-- dtl:block:CreateProject -->
                </ul>
            </div>
        </div>
<!-- dtl:block:OverviewProject -->
        <div class="WidgetSimple">
            <div class="Header">
                <h2>$Text{"Date Navigation"}</h2>
            </div>
            <div class="Content">
                <div class="MonthSelection">
                    <a class="Arrow Left" title="$Text{"Previous day"}" href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=Edit;Year=$LQData{"YearBack"};Month=$LQData{"MonthBack"}"></a>
                    $QData{"Year"}-$QData{"Month"}-$QData{"Day"}
                    <a class="Arrow Right" title="$Text{"Next day"}" href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=Edit;Year=$LQData{"YearNext"};Month=$LQData{"MonthNext"}"></a>
                </div>
                <div class="Clear"></div>
                <form action="$Env{"CGIHandle"}" method="post" enctype="multipart/form-data" name="DateSelection">
                    <input type="hidden" name="Action" value="$Env{"Action"}" />
                    <input type="hidden" name="Subaction" value="Edit" />
                    $Data{"Date"}
                    <input class="button" type="submit" value="$Text{"Submit"}" />
                </form>
<!-- dtl:block:IncompleteText -->
                <h2 class="SpacingTop">$Text{"Days without entries"}:</h2>
                <ul>
<!-- dtl:block:IncompleteWorkingDays -->
                    <li>
                        <a href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=Edit;Year=$LQData{"Year"};Month=$LQData{"Month"};Day=$LQData{"Day"}">
                            $QData{"Year"}-$QData{"Month"}-$QData{"Day"}
                        </a>
                    </li>
<!-- dtl:block:IncompleteWorkingDays -->
<!-- dtl:block:IncompleteWorkingDaysSelected -->
                    <li>
                        <a href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=Edit;Year=$LQData{"Year"};Month=$LQData{"Month"};Day=$LQData{"Day"}">
                            <strong>$QData{"Year"}-$QData{"Month"}-$QData{"Day"}</strong>
                        </a>
                    </li>
<!-- dtl:block:IncompleteWorkingDaysSelected -->
                </ul>
<!-- dtl:block:IncompleteText -->
            </div>
        </div>
        <div class="WidgetSimple SpacingTop">
            <div class="Header">
                <h2>$Text{"Reference"}</h2>
            </div>
            <div class="Content">
                <ul>
                    <li>$Text{"Required fields are marked with a "*""}</li>
                    <li>$Text{"You have to insert a start and an end time or a period"}</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="ContentColumn">
        <div class="WidgetSimple">
            <div class="Header">
                <h2>$Text{"Date"}: $Text{"$Data{"Weekday_to_Text"}"} $QData{"Year"}-$QData{"Month"}-$QData{"Day"}</h2>
            </div>
            <div class="Content">
<!-- dtl:block:UnitBlock -->
                <form action="$Env{"CGIHandle"}" method="post" enctype="multipart/form-data" name="WorkingUnits" id="WorkingUnits" class="Validate PreventMultipleSubmits">
                    <input type="hidden" name="Action" value="$Env{"Action"}" />
                    <input type="hidden" name="Subaction" value="Edit" />
                    <input type="hidden" name="RecordsNumber" value="$QData{"RecordsNumber"}" />
                    <input type="hidden" name="Status" value="Action" />
                    <input type="hidden" name="Year" value="$QData{"Year"}" />
                    <input type="hidden" name="Month" value="$QData{"Month"}" />
                    <input type="hidden" name="Day" value="$QData{"Day"}" />
                    <table class="DataTable NoHover HighCells">
                        <thead>
                            <tr>
                                <th><span class="Marker">*</span> $Text{"Project"}</th>
                                <th><span class="Marker">*</span> $Text{"Task"}</th>
                                <th>$Text{"Remark"}</th>
                                <th>$Text{"Start"} (HH:MM)</th>
                                <th>$Text{"End"} (HH:MM)</th>
                                <th><span class="Marker">$QData{"PeriodNote"}</span> $Text{"Period"}</th>
                            </tr>
                        </thead>
                        <tbody>
<!-- dtl:block:Unit -->
                            <tr>
                                <td>
                                    $Data{"ProjectOption"}
                                    <div id="ProjectID$QData{"ID"}Error" class="TooltipErrorMessage"><p>$Text{"This field is required."}</p></div>
                                    <div id="ProjectID$QData{"ID"}ServerError" class="TooltipErrorMessage"><p>$Text{"This field is required."}</p></div>
                                </td>
                                <td>
                                    $Data{"ActionOption"}
                                    <div id="ActionID$QData{"ID"}Error" class="TooltipErrorMessage"><p>$Text{"This field is required."}</p></div>
                                    <div id="ActionID$QData{"ID"}ServerError" class="TooltipErrorMessage"><p>$Text{"This field is required."}</p></div>
                                </td>
                                <td>
                                    <input type="text" name="Remark[$QData{"ID"}]" id="Remark$QData{"ID"}" class="Validate_TimeAccounting_Remark $QData{"RemarkInvalid"}" value="$QData{"Remark"}" size="35" />
                                    <div id="Remark$QData{"ID"}Error" class="TooltipErrorMessage"><p>$Text{"Please add a remark with more than 8 characters!."}</p></div>
                                    <div id="Remark$QData{"ID"}ServerError" class="TooltipErrorMessage">
                                        <p>$Text{"This field is required."}</p>
                                    </div>
                                </td>
                                <td>
                                    <input type="text" name="StartTime[$QData{"ID"}]" id="StartTime$QData{"ID"}" class="Validate_TimeAccounting_StartTime $QData{"StartTimeRequired"} $QData{"StartTimeInvalid"}" value="$QData{"StartTime"}" size="7" />
                                    <div id="StartTime$QData{"ID"}Error" class="TooltipErrorMessage">
                                        <p>$Text{"You have to fill in start and end time or a time period."}</p>
                                    </div>
                                    <div id="StartTime$QData{"ID"}ServerError" class="TooltipErrorMessage">
                                        <p>$Text{"This field is required."}</p>
                                    </div>
                                </td>
                                <td>
                                    <input type="text" name="EndTime[$QData{"ID"}]" id="EndTime$QData{"ID"}" class="Validate_DependingRequiredAND Validate_Depending_StartTime$QData{"ID"} $QData{"EndTimeRequired"} $QData{"EndTimeInvalid"}" value="$QData{"EndTime"}" size="7" />
                                    <div id="EndTime$QData{"ID"}Error" class="TooltipErrorMessage">
                                        <p>$Text{"You have to fill in start and end time or a time period."}</p>
                                    </div>
                                    <div id="EndTime$QData{"ID"}ServerError" class="TooltipErrorMessage">
                                        <p>$Text{"This field is required."}</p>
                                    </div>
                                </td>
<!-- dtl:block:UnitInputPeriod -->
                                <td>
                                    <input type="text" name="Period[$QData{"ID"}]" id="Period$QData{"ID"}" class="Validate_TimeAccounting_Period Validate_TimeUnits $QData{"PeriodRequired"} $QData{"PeriodInvalid"}" value="$QData{"Period"}" size="7" />
                                    <div id="Period$QData{"ID"}Error" class="TooltipErrorMessage">
                                        <p>$Text{"You have to fill in start and end time or a time period."}</p>
                                    </div>
<!-- dtl:block:PeriodGenericServerError -->
                                    <div id="Period$QData{"ID"}ServerError" class="TooltipErrorMessage">
                                        <p>$Text{"This field is required."}</p>
                                    </div>
<!-- dtl:block:PeriodGenericServerError -->
<!-- dtl:block:InvalidPeriodServerError -->
                                    <div id="Period$QData{"ID"}ServerError" class="TooltipErrorMessage">
                                        <p>$Text{"Period is bigger than the interval between start and end times!"}</p>
                                    </div>
<!-- dtl:block:InvalidPeriodServerError -->
<!-- dtl:block:InvalidHoursPeriodServerError -->
                                    <div id="Period$QData{"ID"}ServerError" class="TooltipErrorMessage">
                                        <p>$Text{"Invalid period! A day has only 24 hours."}</p>
                                    </div>
<!-- dtl:block:InvalidHoursPeriodServerError -->
<!-- dtl:block:ZeroHoursPeriodServerError -->
                                    <div id="Period$QData{"ID"}ServerError" class="TooltipErrorMessage">
                                        <p>$Text{"A valid period must be greater than zero."}</p>
                                    </div>
<!-- dtl:block:ZeroHoursPeriodServerError -->

                                </td>
<!-- dtl:block:UnitInputPeriod -->
<!-- dtl:block:UnitPeriodWithoutInput -->
                                <td>$QData{"Period"}</td>
<!-- dtl:block:UnitPeriodWithoutInput -->
                            </tr>
<!-- dtl:block:Unit -->
                            <tr>
                                <td colspan="6" class="Right">
                                    <button class="CallForAction Plus" name="MoreInputFields" value="More input fields"><span>$Text{"More input fields"}</span></button>
                                </td>
                            </tr>
<!-- dtl:block:UnitBlock -->
                            <tr>
                                <td colspan="4"></td>
<!-- dtl:block:Total -->
                                <td>$Text{"Total"}:</td>
                                <td>$QData{"Total"}</td>
<!-- dtl:block:Total -->
                            </tr>
<!-- dtl:block:Readonly -->
                            <tr>
                                <td colspan="6">
                                    $Text{"$Data{"Description"}"}
                                </td>
                            </tr>
<!-- dtl:block:Readonly -->
                        </tbody>
                    </table>
<!-- dtl:block:OtherTimes -->
                    <div class="SpacingTop">
                        <input type="checkbox" value="1" id="LeaveDay" name="LeaveDay" title="$Text{"On vacation"}" class="$Data{"LeaveDayInvalid"}" $Data{"LeaveDay"} />
                        <label for="LeaveDay">$Text{"On vacation"}</label>
                        <div id="LeaveDayServerError" class="TooltipErrorMessage">
                            <p>$Text{"You can only select one checkbox element!"}</p>
                        </div>
                        <input type="checkbox" value="1" id="Sick" name="Sick" title="$Text{"On sick leave"}" class="$Data{"SickInvalid"}" $Data{"Sick"} />
                        <label for="Sick">$Text{"On sick leave"}</label>
                        <div id="SickServerError" class="TooltipErrorMessage">
                            <p>$Text{"You can only select one checkbox element!"}</p>
                        </div>
                        <input type="checkbox" value="1" id="Overtime" name="Overtime" title="$Text{"On overtime leave"}" class="$Data{"OvertimeInvalid"}" $Data{"Overtime"} />
                        <label for="Overtime">$Text{"On overtime leave"}</label>
                        <div id="OvertimeServerError" class="TooltipErrorMessage">
                            <p>$Text{"You can only select one checkbox element!"}</p>
                        </div>
                    </div>
<!-- dtl:block:OtherTimes -->
                    <div class="Center SpacingTop">
                        <button class="Primary" type="submit" value="$Text{"Submit"}">$Text{"Submit"}</button>
                        <a id="DeleteTimeAccountingEntry" href="#">
                            $Text{"Delete"}
                        </a>
                        $Text{"or"}
                        <a href="$Env{"Baselink"}Action=$Env{"Action"};Subaction=Edit">$Text{"Cancel"}</a>
                    </div>
                    <div class="Clear"></div>
<!--dtl:js_on_document_complete-->
<script type="text/javascript">//<![CDATA[
    TimeAccounting.Agent.EditTimeRecords.ActionList = $QData{"JSActionList"};
    TimeAccounting.Agent.EditTimeRecords.ActionListConstraints = $QData{"JSActionListConstraints"};
    TimeAccounting.Agent.EditTimeRecords.Init("$QData{"RemarkRegExp"}");
    TimeAccounting.Agent.ConfirmationDialog.BindConfirmationDialog({
        ElementID:                  'DeleteTimeAccountingEntry',
        ElementSelector:            '#DeleteTimeAccountingEntry',
        DialogContentQueryString:   'Action=AgentTimeAccounting;DeleteDay=1;Year=$QData{"Year"};Month=$QData{"Month"};Day=$QData{"Day"}',
        ConfirmedActionQueryString: 'Action=AgentTimeAccounting;Subaction=Delete;Year=$QData{"Year"};Month=$QData{"Month"};Day=$QData{"Day"}',
        DialogTitle:                '$JSText{"Delete Time Accounting Entry"}',
        TranslatedText:             {
            Yes: '$JSText{"Yes"}',
            No:  '$JSText{"No"}'
        }
    });
//]]></script>
<!--dtl:js_on_document_complete-->
                </form>
            </div>
        </div>
    </div>
</div>
